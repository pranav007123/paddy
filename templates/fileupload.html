{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container py-5 mt-4">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="feature-card shadow-lg">
                <div class="card-body p-4">
                    <span class="section-tag">AI Diagnostics</span>
                    <h2 class="mb-4">Paddy Health Analysis</h2>
                    <p class="text-muted mb-4">Please upload a clear image of the धान (Paddy) leaf. Our neural network
                        will identify common stressors and diseases.</p>

                    {% if message %}
                    <div class="alert alert-info border-0 shadow-sm" style="background: #eff6ff; color: #1e40af;">
                        <i class="fas fa-info-circle mr-2"></i> {{message}}
                    </div>
                    {% endif %}

                    <form method="POST" action="{% url 'add_paddy_file' %}" enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="upload-box mb-4">
                            <i class="fas fa-cloud-upload-alt upload-icon"></i>
                            <div class="form-group">
                                <label class="d-block mb-3 font-weight-bold">Select Leaf Image</label>
                                <input type="file" name="paddy" class="form-control" style="border-radius: 10px;"
                                    required>
                            </div>
                        </div>
                        <div class="text-center">
                            <button type="submit"
                                class="btn btn-premium btn-premium-primary w-100 justify-content-center">
                                <i class="fas fa-search"></i> Run AI Diagnosis
                            </button>
                        </div>
                    </form>

                    {% if result %}
                    <div class="mt-5 text-center animate__animated animate__fadeInUp">
                        <div class="p-4 rounded-3" style="background: #f0fdf4; border: 1px solid #bbf7d0;">
                            <h5 class="text-muted mb-2">Detection Result</h5>
                            <h3 class="display-6 font-weight-bold" style="color: #15803d;">{{result}}</h3>
                            <a href="#" class="btn btn-link text-success mt-2">View Treatment Plan <i
                                    class="fas fa-arrow-right"></i></a>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}