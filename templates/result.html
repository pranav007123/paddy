{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container py-5">
    <div class="row mb-4">
        <div class="col-12 text-center">
            <h2>Analysis Result</h2>
            <hr>
        </div>
    </div>

    <div class="row">
        <div class="col-md-5 mb-4">
            <div class="card shadow-sm">
                <div class="card-body text-center">
                    {% if result %}
                    <h3 class="text-success mb-2">Analysis Complete</h3>
                    <div class="p-3 rounded-pill bg-light border border-success d-inline-block px-5">
                        <h4 class="mb-0 text-success font-weight-bold">{{ result }}</h4>
                    </div>
                    {% if image_url %}
                    <div class="mt-4">
                        <p class="text-muted small mb-2">Uploaded Leaf Image:</p>
                        <img src="/media/{{ image_url }}" class="img-fluid rounded shadow-sm border"
                            alt="Analyzed Image" style="max-height: 400px; border-width: 4px !important;">
                    </div>
                    {% endif %}
                    {% endif %}
                </div>
            </div>
        </div>

        <div class="col-md-7">
            <div class="card shadow-sm p-4">
                {% if "Leaf Scald" in result %}
                <h3>About the Disease</h3>
                <p>Leaf Scald is a fungal disease of paddy caused by Microdochium oryzae.</p>
                <h4>Symptoms</h4>
                <ul>
                    <li>Water-soaked lesions on leaf tips</li>
                    <li>Lesions turn grayish-green to brown</li>
                    <li>Leaves dry out and curl</li>
                </ul>
                <h4>Remedies</h4>
                <p>Use resistant varieties, maintain proper spacing, and avoid excessive nitrogen fertilizer.</p>

                {% elif "Leaf Blast" in result %}
                <h3>About the Disease</h3>
                <p>Leaf blast is a destructive fungal disease caused by Magnaporthe oryzae.</p>
                <h4>Remedies</h4>
                <ul>
                    <li>Use blast-resistant varieties.</li>
                    <li>Treat seeds with Trichoderma spp.</li>
                    <li>Avoid excessive nitrogen.</li>
                </ul>

                {% elif "Brown Spot" in result %}
                <h3>About the Disease</h3>
                <p>Caused by Bipolaris oryzae. Small, circular brown spots on leaves.</p>
                <h4>Remedies</h4>
                <p>Use resistant varieties and treat seeds with hot water (52°C for 10 min).</p>

                {% elif "Bacterial Leaf Blight" in result %}
                <h3>About the Disease</h3>
                <p>Caused by Xanthomonas oryzae. Spreads rapidly in humidity.</p>
                <h4>Remedies</h4>
                <ul>
                    <li>Soak seeds in hot water (52°C).</li>
                    <li>Use Pseudomonas fluorescens as biocontrol.</li>
                </ul>

                {% elif "Anthracnose" in result %}
                <h3>About the Disease (Mango)</h3>
                <p>Anthracnose is one of the most common fungal diseases in mango, caused by <i>Colletotrichum
                        gloeosporioides</i>.</p>
                <h4>Symptoms</h4>
                <ul>
                    <li>Small, dark-colored, water-soaked spots on leaves.</li>
                    <li>Spots expand into large, irregular, dark brown to black lesions.</li>
                    <li>Premature leaf drop in severe cases.</li>
                </ul>
                <h4>Remedies</h4>
                <ul>
                    <li>Prune and destroy infected plant parts.</li>
                    <li>Apply copper-based fungicides or Bordeaux mixture.</li>
                    <li>Ensure proper spacing for air circulation.</li>
                </ul>

                {% elif "Bacterial Canker" in result %}
                <h3>About the Disease (Mango)</h3>
                <p>Bacterial Canker (or Bacterial Spot) is caused by <i>Xanthomonas campestris pv.
                        mangiferaeindicae</i>.</p>
                <h4>Symptoms</h4>
                <ul>
                    <li>Angular, water-soaked spots on leaves.</li>
                    <li>Spots become raised, dark brown to black with a yellow halo.</li>
                    <li>Cankerous lesions on leaf stalks and branches.</li>
                </ul>
                <h4>Remedies</h4>
                <ul>
                    <li>Use disease-free planting materials.</li>
                    <li>Spray Streptocycline or copper oxychloride.</li>
                    <li>Avoid physical damage to the tree bark.</li>
                </ul>

                {% elif "Sooty Mould" in result %}
                <h3>About the Disease (Mango)</h3>
                <p>Sooty Mould is a black fungus that grows on the 'honeydew' secreted by insects like mango hoppers.
                </p>
                <h4>Symptoms</h4>
                <ul>
                    <li>A black, velvety film or soot-like coating on leaf surfaces.</li>
                    <li>Reduced photosynthesis due to leaf coverage.</li>
                    <li>Presence of sticky honeydew on leaves and stems.</li>
                </ul>
                <h4>Remedies</h4>
                <ul>
                    <li>Control the underlying insect pests (hoppers, aphids, scales).</li>
                    <li>Spray 2% starch solution; it dries and flakes off the mould.</li>
                    <li>Prune overcrowded branches to improve sunlight penetration.</li>
                </ul>

                {% elif "Healthy" in result %}
                <div class="text-center py-4">
                    <i class="fas fa-check-circle fa-4x text-success mb-3"></i>
                    <h3 class="text-success">Healthy Plant!</h3>
                    <p>No diseases detected. Keep up the good plant care.</p>
                </div>
                {% endif %}
            </div>
            <div class="mt-4 text-center">
                <a href="/index" class="btn btn-primary">Back to Home</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}